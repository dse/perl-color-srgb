#!perl -T
use 5.010;
use strict;
use warnings;
use Test::More;

use Color::sRGB;
use Color::sRGB::Util qw(:all);
use Data::Dumper qw(Dumper);

ok(Color::sRGB->new()->asString eq '#ffffff');
ok(Color::sRGB->new('#123')->asString eq '#112233');
ok(Color::sRGB->new('#123')->{r} == 1 / 15);
ok(Color::sRGB->new('#123')->{g} == 2 / 15);
ok(Color::sRGB->new('#123')->{b} == 3 / 15);
ok(Color::sRGB->new('#123')->{a} == 1);
ok(Color::sRGB->new('#112233')->asString eq '#112233');
ok(Color::sRGB->new('#112233')->{r} == 1 / 15);
ok(Color::sRGB->new('#112233')->{g} == 2 / 15);
ok(Color::sRGB->new('#112233')->{b} == 3 / 15);
ok(Color::sRGB->new('#112233')->{a} == 1);
ok(Color::sRGB->new('#111122223333')->asString eq '#112233');
ok(Color::sRGB->new('#111122223333')->{r} == 1 / 15);
ok(Color::sRGB->new('#111122223333')->{g} == 2 / 15);
ok(Color::sRGB->new('#111122223333')->{b} == 3 / 15);
ok(Color::sRGB->new('#111122223333')->{a} == 1);
ok(Color::sRGB->new('#1234')->asString eq '#11223344');
ok(Color::sRGB->new('#1234')->{r} == 1 / 15);
ok(Color::sRGB->new('#1234')->{g} == 2 / 15);
ok(Color::sRGB->new('#1234')->{b} == 3 / 15);
ok(Color::sRGB->new('#1234')->{a} == 4 / 15);
ok(Color::sRGB->new('#11223344')->asString eq '#11223344');
ok(Color::sRGB->new('#11223344')->{r} == 1 / 15);
ok(Color::sRGB->new('#11223344')->{g} == 2 / 15);
ok(Color::sRGB->new('#11223344')->{b} == 3 / 15);
ok(Color::sRGB->new('#11223344')->{a} == 4 / 15);
ok(Color::sRGB->new('#1111222233334444')->asString eq '#11223344');
ok(Color::sRGB->new('#1111222233334444')->{r} == 1 / 15);
ok(Color::sRGB->new('#1111222233334444')->{g} == 2 / 15);
ok(Color::sRGB->new('#1111222233334444')->{b} == 3 / 15);
ok(Color::sRGB->new('#1111222233334444')->{a} == 4 / 15);
ok(Color::sRGB->new(-1, -1, -1)->{r} == 0);
ok(Color::sRGB->new(-1, -1, -1)->{g} == 0);
ok(Color::sRGB->new(-1, -1, -1)->{b} == 0);
ok(Color::sRGB->new(-1, -1, -1)->{a} == 1);
ok(Color::sRGB->new(-1, -1, -1)->asString eq '#000000');
ok(Color::sRGB->new(1.5, 1.5, 1.5)->{r} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5)->{g} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5)->{b} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5)->{a} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5)->asString eq '#ffffff');
ok(Color::sRGB->new(-1, -1, -1, -1)->{r} == 0);
ok(Color::sRGB->new(-1, -1, -1, -1)->{g} == 0);
ok(Color::sRGB->new(-1, -1, -1, -1)->{b} == 0);
ok(Color::sRGB->new(-1, -1, -1, -1)->{a} == 0);
ok(Color::sRGB->new(-1, -1, -1, -1)->asString eq '#00000000');
ok(Color::sRGB->new(1.5, 1.5, 1.5, 1.5)->{r} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5, 1.5)->{g} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5, 1.5)->{b} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5, 1.5)->{a} == 1);
ok(Color::sRGB->new(1.5, 1.5, 1.5, 1.5)->asString eq '#ffffff');
ok(Color::sRGB->new(0.1, 0.2, 0.3)->{r} == 0.1);
ok(Color::sRGB->new(0.1, 0.2, 0.3)->{g} == 0.2);
ok(Color::sRGB->new(0.1, 0.2, 0.3)->{b} == 0.3);
ok(Color::sRGB->new(0.1, 0.2, 0.3)->{a} == 1.0);
ok(Color::sRGB->new(0.1, 0.2, 0.3)->asString eq '#1a334d');
ok(Color::sRGB->new(0.1, 0.2, 0.3, 0.4)->{r} == 0.1);
ok(Color::sRGB->new(0.1, 0.2, 0.3, 0.4)->{g} == 0.2);
ok(Color::sRGB->new(0.1, 0.2, 0.3, 0.4)->{b} == 0.3);
ok(Color::sRGB->new(0.1, 0.2, 0.3, 0.4)->{a} == 0.4);
ok(Color::sRGB->new(0.1, 0.2, 0.3, 0.4)->asString eq '#1a334d66');
ok(Color::sRGB->new('transparent')->{a} == 0);
ok(Color::sRGB->new('yellow')->{r} == 1);
ok(Color::sRGB->new('yellow')->{g} == 1);
ok(Color::sRGB->new('yellow')->{b} == 0);
ok(Color::sRGB->new('yellow')->{a} == 1);
ok(Color::sRGB->new('rgb(204 , 153 , 102)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(204 , 153 , 102)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(204 , 153 , 102)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(204 , 153 , 102)')->{a} == 1.0);
ok(Color::sRGB->new('rgb(204,153,102)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(204,153,102)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(204,153,102)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(204,153,102)')->{a} == 1.0);
ok(Color::sRGB->new('rgb(204 153 102)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(204 153 102)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(204 153 102)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(204 153 102)')->{a} == 1.0);
ok(Color::sRGB->new('rgb(204,153,102,0.6)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(204,153,102,0.6)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(204,153,102,0.6)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(204,153,102,0.6)')->{a} == 0.6);
ok(Color::sRGB->new('rgb(204 153 102 / 0.6)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(204 153 102 / 0.6)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(204 153 102 / 0.6)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(204 153 102 / 0.6)')->{a} == 0.6);
ok(Color::sRGB->new('rgb(204 153 102/0.6)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(204 153 102/0.6)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(204 153 102/0.6)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(204 153 102/0.6)')->{a} == 0.6);
ok(Color::sRGB->new('rgb(80%, 60%, 40%)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(80%, 60%, 40%)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(80%, 60%, 40%)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(80%, 60%, 40%)')->{a} == 1.0);
ok(Color::sRGB->new('rgb(80%, 60%, 40%, 20%)')->{r} == 0.8);
ok(Color::sRGB->new('rgb(80%, 60%, 40%, 20%)')->{g} == 0.6);
ok(Color::sRGB->new('rgb(80%, 60%, 40%, 20%)')->{b} == 0.4);
ok(Color::sRGB->new('rgb(80%, 60%, 40%, 20%)')->{a} == 0.2);
ok(clamp(-1) == 0);
ok(clamp(-0.3) == 0);
ok(clamp(0) == 0);
ok(clamp(0.3) == 0.3);
ok(clamp(1) == 1);
ok(clamp(1.3) == 1);
ok(clamp(2) == 1);
ok(ncmp(1, 0.999) == 0);
ok(ncmp(1, 0.98) > 0);
ok(ncmp(0.999, 1) == 0);
ok(ncmp(0.98, 1) < 0);
ok(ncmp(1, 1) == 0);
ok(ncmp(1, 1.001) == 0);
ok(ncmp(1, 1.02) < 0);
ok(ncmp(1, 1) == 0);
ok(ncmp(1.001, 1) == 0);
ok(ncmp(1.02, 1) > 0);


done_testing();
